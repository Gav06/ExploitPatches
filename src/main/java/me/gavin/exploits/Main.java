package me.gavin.exploits;

import me.gavin.exploits.commands.CrashCommand;
import me.gavin.exploits.commands.ReloadCommand;
import me.gavin.kotlin.patch.*;
import org.bukkit.command.CommandExecutor;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.event.Listener;
import org.bukkit.plugin.java.JavaPlugin;

public class Main extends JavaPlugin {

    public static Main get() {
        return getPlugin(Main.class);
    }

    public FileConfiguration config = getConfig();

    @Override
    public void onEnable() {
        this.saveDefaultConfig();

        // cmds
        registerCommand(new ReloadCommand(), "exreload");
        registerCommand(new CrashCommand(), "tacocrash");

        // patches
        registerEvent(new SkullRemover());
        registerEvent(new HopperLag());
        registerEvent(new ShulkerCrash());
        registerEvent(new RedstoneLag());
    }

    private void registerEvent(Listener listener) {
        getServer().getPluginManager().registerEvents(listener, this);
    }
    private void registerCommand(CommandExecutor executor, String cmd) {
        getCommand(cmd).setExecutor(executor);
    }
}
