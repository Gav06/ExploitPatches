package me.gavin.kotlin.patch

import me.gavin.exploits.Main
import me.gavin.exploits.Utils
import org.bukkit.entity.EntityType
import org.bukkit.event.EventHandler
import org.bukkit.event.EventPriority
import org.bukkit.event.Listener
import org.bukkit.event.entity.EntitySpawnEvent

class WitherSpawn : Listener {

    // made it highest priority so that the wither just doesn't spawn,
    // instead of the soul sand also disappearing
    @EventHandler(priority = EventPriority.HIGHEST)
    fun onSpawn(event: EntitySpawnEvent) {
        if (event.entityType != EntityType.WITHER)
            return

        if (Main.get().config.getBoolean("AntiWitherSpawn.Enabled")) {
            if (Main.get().config.getDouble("AntiWitherSpawn.Activate-Tps") > Utils.getTPS())
                event.isCancelled = true
        }
    }
}