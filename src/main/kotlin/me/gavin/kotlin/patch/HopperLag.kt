package me.gavin.kotlin.patch

import me.gavin.exploits.Main
import me.gavin.kotlin.util.Patch
import org.bukkit.event.EventHandler
import org.bukkit.event.inventory.InventoryMoveItemEvent
import org.bukkit.event.inventory.InventoryPickupItemEvent

class HopperLag : Patch() {

    @EventHandler
    fun onTransfer(event: InventoryMoveItemEvent) {
        if (!Main.get().config.getBoolean("HopperLag"))
            return

        if (Main.get().server.tps[0] < Main.get().config.getDouble("HopperLag.Disable-Tps"))
            event.isCancelled = true
    }

    @EventHandler
    fun onPickup(event: InventoryPickupItemEvent) {
        if (!Main.get().config.getBoolean("HopperLag"))
            return

        if (Main.get().server.tps[0] < Main.get().config.getDouble("HopperLag.Disable-Tps"))
            event.isCancelled = true
    }
}